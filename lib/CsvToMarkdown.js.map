{"version":3,"file":"CsvToMarkdown.js","sources":["../src/CsvToMarkdown.ts"],"sourcesContent":["/**\n * Converts CSV to Markdown Table\n *\n * @param {string} csvContent - The string content of the CSV\n * @param {string} delimiter - The character(s) to use as the CSV column delimiter\n * @param {boolean} hasHeader - Whether to use the first row of Data as headers\n * @returns {string}\n */\nexport default function csvToMarkdown(csvContent, delimiter, hasHeader) {\n    if (delimiter === void 0) { delimiter = \"\\t\"; }\n    if (hasHeader === void 0) { hasHeader = false; }\n    if (delimiter != \"\\t\") {\n        csvContent = csvContent.replace(/\\t/g, \"    \");\n    }\n    var columns = csvContent.split(/\\r?\\n/);\n    var tabularData = [];\n    var maxRowLen = [];\n    var regsafeDelimiter = delimiter.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n    var regex = new RegExp(\"\".concat(regsafeDelimiter, \"(?![^\\\"]*\\\"(?:$|\").concat(regsafeDelimiter, \"))\"));\n    columns.forEach(function (e, i) {\n        if (typeof tabularData[i] == \"undefined\") {\n            tabularData[i] = [];\n        }\n        var row = e.split(regex);\n        row.forEach(function (ee, ii) {\n            if (typeof maxRowLen[ii] == \"undefined\") {\n                maxRowLen[ii] = 0;\n            }\n            // escape pipes and backslashes\n            ee = ee.replace(/(\\||\\\\)/g, \"\\\\$1\");\n            maxRowLen[ii] = Math.max(maxRowLen[ii], ee.length);\n            tabularData[i][ii] = ee;\n        });\n    });\n    var headerOutput = \"\";\n    var seperatorOutput = \"\";\n    maxRowLen.forEach(function (len) {\n        var sizer = Array(len + 1 + 2);\n        seperatorOutput += \"|\" + sizer.join(\"-\");\n        headerOutput += \"|\" + sizer.join(\" \");\n    });\n    headerOutput += \"| \\n\";\n    seperatorOutput += \"| \\n\";\n    if (hasHeader) {\n        headerOutput = \"\";\n    }\n    var rowOutput = \"\";\n    tabularData.forEach(function (col, i) {\n        maxRowLen.forEach(function (len, y) {\n            var row = typeof col[y] == \"undefined\" ? \"\" : col[y];\n            var spacing = Array((len - row.length) + 1).join(\" \");\n            var out = \"| \".concat(row).concat(spacing, \" \");\n            if (hasHeader && i === 0) {\n                headerOutput += out;\n            }\n            else {\n                rowOutput += out;\n            }\n        });\n        if (hasHeader && i === 0) {\n            headerOutput += \"| \\n\";\n        }\n        else {\n            rowOutput += \"| \\n\";\n        }\n    });\n    return \"\".concat(headerOutput).concat(seperatorOutput).concat(rowOutput);\n}\n"],"names":[],"mappings":"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"}